2+2
setwd("~/Documents/GitHub/DataAnalyticsFall2022_Jody_Sunray/labs/group2/lab3")
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
names(bronx1) <- gsub(" ", "_", names(bronx1))
View(bronx1)
names(bronx1) <- gsub("\n", "_", names(bronx1))
View(bronx1)
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
SALE.PRICE<-sub("\\$","",SALE.PRICE)
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
# attach default
attach(bronx1)
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
bronx1$SALE.PRICE <- bronx1$SALE.PRICE[!is.na(bronx1$SALE.PRICE)]
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
bronx1$GROSS.SQUARE.FEET <- bronx1$GROSS.SQUARE.FEET[!is.na(bronx1$GROSS.SQUARE.FEET)]
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
bronx1$SALE.PRICE <- bronx1$SALE.PRICE[!is.na(bronx1$SALE.PRICE) && !(bronx1$SALE.PRICE == "Inf")]
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
bronx1$SALE.PRICE <- bronx1$SALE.PRICE[is.na(bronx1$SALE.PRICE) | bronx1$SALE.PRICE == "Inf"]
na <- bronx1$SALE.PRICE[is.na(bronx1$SALE.PRICE) | bronx1$SALE.PRICE == "Inf"]
bronx1 <- bronx1[!is.na(bronx1$SALE.PRICE) && !(bronx1$SALE.PRICE == "Inf")]
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
bronx1 <- bronx1[!is.na(bronx1$SALE.PRICE) && !(bronx1$SALE.PRICE == "Inf")]
na <- bronx1$SALE.PRICE[is.na(bronx1$SALE.PRICE) | bronx1$SALE.PRICE == "Inf"]
bronx1 <- bronx1[!is.na(bronx1$SALE.PRICE) && !(bronx1$SALE.PRICE == "Inf")]
bronx1 <- bronx1[!is.na(bronx1$SALE.PRICE) & !(bronx1$SALE.PRICE == "Inf")]
bronx1 <- bronx1[!is.na(bronx1$SALE.PRICE) && !(bronx1$SALE.PRICE == "Inf")]
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
bronx1 <- bronx1[!is.na(bronx1$SALE.PRICE)]
View(bronx1)
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
bronx1 <- bronx1[!is.na(bronx1$SALE.PRICE)]
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
bronx1na <- bronx1[is.na(bronx1$SALE.PRICE)]
na.omit(bronx1)
View(bronx1)
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
na.omit(bronx1)
View(bronx1)
bronx1 <- na.omit(bronx1)
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
bronx1$`EASE-MENT` = NULL
bronx1 <- na.omit(bronx1)
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
bronx1[is.na(bronx1) | bronx1=="Inf"] = NA
bronx1[is.na(bronx1)] = NA
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
SALE.PRICE<-sub("\\$","",SALE.PRICE)
SALE.PRICE<-as.numeric(gsub(",","", SALE.PRICE))
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", "_", names(bronx1))
names(bronx1) <- gsub("\n", "_", names(bronx1))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
bronx1$SALE.PRICE<-sub("\\$","",SALE.PRICE)
bronx1$SALE.PRICE<-as.numeric(gsub(",","", SALE.PRICE))
bronx1$GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
bronx1$LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
m1<-lm(log(bronx1$SALE.PRICE)~log(bronx1$GROSS.SQUARE.FEET))
bronx1na <- bronx1[is.na(bronx1$SALE.PRICE)]
brbronx1[!is.na(bronx1$SALE.PRICE) && !(bronx1$SALE.PRICE == "Inf")]
setwd("~/Documents/GitHub/DataAnalyticsFall2022_Jody_Sunray/labs/group2/lab3")
library(gdata)
# read excel file
install.packages("readxl")
library(gdata)
# read excel file
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
bronx1$SALE.PRICE<-sub("\\$","",SALE.PRICE)
bronx1$SALE.PRICE<-as.numeric(gsub(",","", SALE.PRICE))
bronx1$GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
bronx1$LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
m1<-lm(SALE.PRICE~GROSS.SQUARE.FEET)
SALE.PRICE<-sub("\\$","",SALE.PRICE)
SALE.PRICE<-as.numeric(gsub(",","", SALE.PRICE))
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
# read excel file
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
SALE.PRICE<-sub("\\$","",SALE.PRICE)
SALE.PRICE<-as.numeric(gsub(",","", SALE.PRICE))
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
log.SALE.PRICE<-log(SALE.PRICE)
log.SALE.PRICE<-log.SALE.PRICE[!is.na(log.SALE.PRICE) & !is.infinite(log.SALE.PRICE)]
log.GROSS.SQUARE.FEET<-log.GROSS.SQUARE.FEET[!is.na(log.GROSS.SQUARE.FEET) & !is.infinite(log.GROSS.SQUARE.FEET)]
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
log.GROSS.SQUARE.FEET<-log(log.GROSS.SQUARE.FEET)
log.GROSS.SQUARE.FEET<-log.GROSS.SQUARE.FEET[!is.na(log.GROSS.SQUARE.FEET) & !is.infinite(log.GROSS.SQUARE.FEET)]
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
log.GROSS.SQUARE.FEET<-log(GROSS.SQUARE.FEET)
log.GROSS.SQUARE.FEET<-log.GROSS.SQUARE.FEET[!is.na(log.GROSS.SQUARE.FEET) & !is.infinite(log.GROSS.SQUARE.FEET)]
# read excel file
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
SALE.PRICE<-sub("\\$","",SALE.PRICE)
SALE.PRICE<-as.numeric(gsub(",","", SALE.PRICE))
log.SALE.PRICE<-log(SALE.PRICE)
log.SALE.PRICE<-log.SALE.PRICE[!is.na(log.SALE.PRICE) & !is.infinite(log.SALE.PRICE)]
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
log.GROSS.SQUARE.FEET<-log(GROSS.SQUARE.FEET)
log.GROSS.SQUARE.FEET<-log.GROSS.SQUARE.FEET[!is.na(log.GROSS.SQUARE.FEET) & !is.infinite(log.GROSS.SQUARE.FEET)]
LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log(SALE.PRICE)~log(GROSS.SQUARE.FEET))
m1<-lm(log.SALE.PRICE~log.GROSS.SQUARE.FEET)
m1<-lm(log.SALE.PRICE~log.GROSS.SQUARE.FEET[1:3589])
summary(m1)
abline(m1,col="red",lwd=2)
plot(resid(m1))
# read excel file
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
log.SALE.PRICE<-log(SALE.PRICE)
log.SALE.PRICE<-log.SALE.PRICE[!is.na(log.SALE.PRICE) & !is.infinite(log.SALE.PRICE)]
GROSS.SQUARE.FEET<-as.numeric(gsub(",","", GROSS.SQUARE.FEET))
log.GROSS.SQUARE.FEET<-log(GROSS.SQUARE.FEET)
log.GROSS.SQUARE.FEET<-log.GROSS.SQUARE.FEET[!is.na(log.GROSS.SQUARE.FEET) & !is.infinite(log.GROSS.SQUARE.FEET)]
LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log.SALE.PRICE~log.GROSS.SQUARE.FEET[1:3589])
summary(m1)
abline(m1,col="red",lwd=2)
plot(resid(m1))
# read excel file
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
# get log of SALE.PRICE and remove infinite values
log.SALE.PRICE<-log(SALE.PRICE)
log.SALE.PRICE<-log.SALE.PRICE[!is.na(log.SALE.PRICE) & !is.infinite(log.SALE.PRICE)]
# get log of GROSS.SQUARE.FEET
log.GROSS.SQUARE.FEET<-log(GROSS.SQUARE.FEET)
log.GROSS.SQUARE.FEET<-log.GROSS.SQUARE.FEET[!is.na(log.GROSS.SQUARE.FEET) & !is.infinite(log.GROSS.SQUARE.FEET)]
LAND.SQUARE.FEET<-as.numeric(gsub(",","", LAND.SQUARE.FEET))
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log.SALE.PRICE~log.GROSS.SQUARE.FEET[1:3589])
summary(m1)
abline(m1,col="red",lwd=2)
plot(resid(m1))
# read excel file
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
# get log of SALE.PRICE and remove infinite values
log.SALE.PRICE<-log(SALE.PRICE)
log.SALE.PRICE<-log.SALE.PRICE[!is.na(log.SALE.PRICE) & !is.infinite(log.SALE.PRICE)]
# get log of GROSS.SQUARE.FEET
log.GROSS.SQUARE.FEET<-log(GROSS.SQUARE.FEET)
log.GROSS.SQUARE.FEET<-log.GROSS.SQUARE.FEET[!is.na(log.GROSS.SQUARE.FEET) & !is.infinite(log.GROSS.SQUARE.FEET)]
log.LAND.SQUARE.FEET<-log(LAND.SQUARE.FEET)
log.LAND.SQUARE.FEET<-log.LAND.SQUARE.FEET[!is.na(log.LAND.SQUARE.FEET) & !is.infinite(log.LAND.SQUARE.FEET)]
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
m1<-lm(log.SALE.PRICE~log.GROSS.SQUARE.FEET[1:3589])
summary(m1)
abline(m1,col="red",lwd=2)
plot(resid(m1))
# read excel file
library("readxl")
help("read_excel")
bronx1 <- read_xls("rollingsales_bronx.xls", sheet = 1, skip = 4)
View(bronx1)
# attach default
attach(bronx1)
# rename column names
names(bronx1) <- gsub(" ", ".", names(bronx1))
names(bronx1) <- gsub("\n", ".", names(bronx1))
View(bronx1)
# get log of SALE.PRICE and remove infinite values
log.SALE.PRICE<-log(SALE.PRICE)
log.SALE.PRICE<-log.SALE.PRICE[!is.na(log.SALE.PRICE) & !is.infinite(log.SALE.PRICE)]
# get log of GROSS.SQUARE.FEET and remove infinite values
log.GROSS.SQUARE.FEET<-log(GROSS.SQUARE.FEET)
log.GROSS.SQUARE.FEET<-log.GROSS.SQUARE.FEET[!is.na(log.GROSS.SQUARE.FEET) & !is.infinite(log.GROSS.SQUARE.FEET)]
# get log of LAND.SQUARE.FEET and remove infinite values
log.LAND.SQUARE.FEET<-log(LAND.SQUARE.FEET)
log.LAND.SQUARE.FEET<-log.LAND.SQUARE.FEET[!is.na(log.LAND.SQUARE.FEET) & !is.infinite(log.LAND.SQUARE.FEET)]
# plot log of GROSS.SQUARE.FEET against log of SALE.PRICE
plot(log(GROSS.SQUARE.FEET), log(SALE.PRICE))
# create linear model for SALE.PRICE based on GROSS.SQUARE.FEET
m1 <- lm(log.SALE.PRICE~log.GROSS.SQUARE.FEET[1:3589])
summary(m1)
abline(m1,col="red",lwd=2)
plot(resid(m1))
m2 <- lm(log(bronx1$SALE.PRICE)~log(bronx1$GROSS.SQUARE.FEET)+log(bronx1$LAND.SQUARE.FEET)+factor(bronx1$NEIGHBORHOOD))
m2 <- lm(log.SALE.PRICE~log.GROSS.SQUARE.FEET+log.LAND.SQUARE.FEET+factor(bronx1$NEIGHBORHOOD))
m2 <- lm(log.SALE.PRICE~log.GROSS.SQUARE.FEET[1:3589]+log.LAND.SQUARE.FEET[1:3589]+factor(bronx1$NEIGHBORHOOD))
m2 <- lm(log.SALE.PRICE~log.GROSS.SQUARE.FEET[1:3589]+log.LAND.SQUARE.FEET[1:3589]+factor(bronx1$NEIGHBORHOOD[1:3589]))
summary(m2)
plot(resid(m2))
# suppress intercept - using "0+ ..."
m2a <- lm(log(bronx1$SALE.PRICE)~0+log.GROSS.SQUARE.FEET[1:3589]+log.LAND.SQUARE.FEET[1:3589]+factor(bronx1$NEIGHBORHOOD[1:3589]))
# suppress intercept - using "0+ ..."
m2a <- lm(log(bronx1$SALE.PRICE)~0+log.GROSS.SQUARE.FEET[1:3589]+log.LAND.SQUARE.FEET[1:3589]+factor(bronx1$NEIGHBORHOOD[1:3589]))
# suppress intercept - using "0+ ..."
m2a <- lm(log.SALE.PRICE~0+log.GROSS.SQUARE.FEET[1:3589]+log.LAND.SQUARE.FEET[1:3589]+factor(bronx1$NEIGHBORHOOD[1:3589]))
summary(m2a)
plot(resid(m2a))
plot(resid(m2a))
m3 <- lm(log.SALE.PRICE~0+log.GROSS.SQUARE.FEET[1:3589]+log.LAND.SQUARE.FEET[1:3589]+factor(bronx1$NEIGHBORHOOD[1:3589])+factor(bronx1$BUILDING.CLASS.CATEGORY[1:3589]))
summary(m3)
plot(resid(m3))
m4 <- lm(log.SALE.PRICE~0+log.GROSS.SQUARE.FEET[1:3589]+log.LAND.SQUARE.FEET[1:3589]+factor(bronx1$NEIGHBORHOOD[1:3589])*factor(bronx1$BUILDING.CLASS.CATEGORY[1:3589]))
summary(m4)
plot(resid(m4))
